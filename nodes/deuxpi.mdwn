[[!waypoint lat="45.46919" lon="-73.56716" embed hidden width="400px" height="400px" right desc="Sous les panneaux solaires"]]

[[!ymlfront data="""
MAC: DC:9F:DB:00:11:D9
IP: 172.16.1.8
IPv6:
- fd64:2c08:9fa7:8::1
"""]]

(!) Batman n'est pas installé sur ce noeud. Seulement Babel est utilisé pour l'instant. Les adresses IP locales ainsi que les routes externes sont distribuées. Avec un peu de chance, pour l'instant, les noeuds qui s'y connectent auront un accès au VPN et à une route IPv4 par défaut vers l'Internet.

# À faire

 * Faire passer un câble Ethernet entre la Bullet sur le toit et la salle des machines.
 * Monter la Bullet haut haut haut!
 * Installer le nouveau serveur/routeur dans la salle des machines.
   * Il faut réorganiser les alimentations électrique (présentement toutes occupées par le monitoring).
   * Il faut s'assurer qu'il y a moyen de raccorder autant le nouveau câble que le filage qui monte vers les appartements. Ces derniers ont été pensés pour être plus près des entrées de Bell et Vidéotron que des entrées électriques.
 * Tester Babel sur [Quagga](http://www.nongnu.org/quagga/) au lieu de babeld.
 * Tester une configuration Batman/switch et Babel/routeur pour des grands sites qui pourraient profiter d'une topologie différente.
 * Installer le point d'accès TP-Link déjà configuré.

# Détails

 * MAC address: {{$MAC}}
 * IP address: {{$IP}}
 * IPv6 address: {{$IPv6}}
 * Software: OpenWRT (trunk)
 * Hardware: Ubiquiti Bullet M2
 * Power: 16 dBm ?, 15 dBi
 * Location: Verdun, coin LaSalle et Rushbrooke
 * Status: [[!taglink up]]
 * Links: [[nodes/bgm-homs]], [[nodes/bgm-latakia]], [[nodes/hexa]], [[nodes/scientist]]
 * Azimuth: Omni
 * Panorama: [[!img panorama.jpg align="left" size="880x103" alt="Vue du toit"]], [[Vue du site de l'installation|https://farm6.staticflickr.com/5223/5881898216_6198d24176.jpg]]
 * Operator: [[users/deuxpi]]

# Configuration Babel

[[!format txt """
babeld.@general[0]=general
babeld.@general[0].local_server=33123
babeld.wlan0=interface
babeld.lan=interface
babeld.lan.ignore=true
babeld.@filter[0]=filter
babeld.@filter[0].type=redistribute
babeld.@filter[0].local=true
babeld.@filter[0].ip=172.16.0.0/12
babeld.@filter[0].action=allow
babeld.@filter[1]=filter
babeld.@filter[1].type=redistribute
babeld.@filter[1].local=true
babeld.@filter[1].ip=fd64:2c08:9fa7::/48
babeld.@filter[1].action=allow
babeld.@filter[2]=filter
babeld.@filter[2].type=redistribute
babeld.@filter[2].if=wlan0
babeld.@filter[2].action=metric 128
babeld.@filter[3]=filter
babeld.@filter[3].type=redistribute
babeld.@filter[3].action=deny
"""]]

## Extras

Pour obtenir la liste des noeuds connectés et leurs niveaux de signal respectifs, j'utilise le script [[bat-signal|https://gitorious.org/deuxpi-docs/deuxpi-docs/blobs/raw/master/bat-signal]]. Si le fichier [[configuration/batman/bat-hosts]] est disponible, le nom des noeuds sera affiché en plus de leur adresse MAC.

En cours de développement, une [interface curses](https://gitorious.org/babelcurse) pour suivre Babel.

[[!meta copyright="Copyright © 2012 Philippe Gauthier"]]

[[!meta license="""[[!toggle id="license" text="GFDL 1.2+"]][[!toggleable
id="license" text="Permission is granted to copy, distribute and/or modify this
document under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no Invariant
Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of the license
is included in the section entitled [[GNU Free Documentation
License|meta/gfdl]]."]]"""]]

