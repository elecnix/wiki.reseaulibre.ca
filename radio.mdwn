[[!toc levels=3]]

Comment ne pas ralentir un mesh
===============================

Un node MESH à une seule radio a beaucoup de limitations.

Des Faits :

 1. Une antenne ne fait pas 2 choses à la fois: elle reçoit ou elle transmet.

  Si on utilise cette antenne pour maintenir la communication au MESH, et aussi pour servir des clients,
le MESH va ralentir. La même radio va communiquer chaque paquet avec le client et aussi vers le MESH.

 2. Le protocole utilisé est le CSMA (Carrier Sense Multiple Access)

  Donc, la station écoute, et si elle n'entends rien, elle transmet.
  Un problème survient lorsque les utilisateurs du même AP ne se voient pas. Ça s'appelle le "Hidden Node".
  Il se produit alors des collisions à répétition, ce qui ralentit énormément le réseau.
  Si le node MESH est utilisé par des clients disposés n'importe ou autour, ça risque de se produire, 
  surtout si le node est sur un toit et qu'il désert une grande superficie.

 3. Les mauvais clients ralentissent le réseau

  Lorsqu'un client est branché à la limite du possible, en plus d'avoir un mauvais service il peux nuire au réseau.
  S'il perd des paquets, il va constamment les reprendre. S'il crée de l'interférence, il va nuire au CSMA.

 4. En mode N, il y a 3 modes HT d'interopérabilité avec les autres protocoles.

 Lorsqu'on déssert des clients non-compatibles N, on doit faire des compromis sur l'efficacité du réseau.
 Un excellent document explique ceci à la page 10. Le reste du document est extrèmement intéressant aussi :-)
 <http://www.airmagnet.com/assets/whitepaper/WP-802.11nPrimer.pdf>

RECOMMANDATIONS
---------------

La radio d'un node MESH devrait si possible n'être utilisée que pour transporter des paquets sur le MESH.
Les radios du MESH devraient utiliser 802.11N en mode HT (Greenfield)à 20Mhz sur un canal edge (1 ou 11).
Il ne faut pas oublier que l'on ralentit à chaque HOP vers la destination (reçoit-transmet avec la même radio)

Pour donner accès aux clients, on devrait utiliser une autre radio. Alors si un problème se produit avec l'un d'eux, 
on ne ralentit pas le trafic du MESH, mais seulement le segment relié à cette radio.
Ces radios peuvent utiliser le mode HT mixed, ou le mode B/G s'ils n'ont pas le standard N (WRT54 genre)


Relationship between Watts and dBm
==================================

 * The watt is a measure of power.
 * The dBm is a logaritmic representation of gain.
 * The difference in dBm between two power levels is `10(log p1/p2)`
 * Therefore, everytime the power doubles, we add 3 dBm
 * By convention in wifi, the reference power at 0dBm is 1 mW (0dBm = 1mW)

Maximum transmitter power versus largest antenna table for PTMP (Point To MultiPoint):
      
     Radio Power            Antenna gain        EIRP in watts

      30dBm 1W                 6dBi                  3.98
      27dBm 500mW              9dBi                  3.98
      24dBm 250mW             12dBi                  3.98
      20dBm 100mW             15dBi                  3.98
      17dBm 50mW              18dBi                  3.98
      14dBm 25mW              21dBi                  3.98
      10dBm 10mW              24dBi                  3.98

dBm to Watt Conversion Table
----------------------------

<html>
              <table border="0" cellpadding="2" cellspacing="0">
                  <tr>
                    <td >
                      dBm
                    </td>
                    <td >
                      Watts
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      dBm
                    </td>
                    <td >
                      Watts
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      dBm
                    </td>
                    <td >
                      Watts
                    </td>
                  </tr>
                  <tr>
                    <td >
                      0
                    </td>
                    <td >
                      1.0 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      16
                    </td>
                    <td >
                      40 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      32
                    </td>
                    <td >
                      1.6 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      1
                    </td>
                    <td >
                      1.3 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      17
                    </td>
                    <td >
                      50 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      33
                    </td>
                    <td >
                      2.0 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      2
                    </td>
                    <td >
                      1.6 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      18
                    </td>
                    <td >
                      63 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      34
                    </td>
                    <td >
                      2.5 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      3
                    </td>
                    <td >
                      2.0 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      19
                    </td>
                    <td >
                      79 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      35
                    </td>
                    <td >
                      3.2 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      4
                    </td>
                    <td >
                      2.5 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      20
                    </td>
                    <td >
                      100 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      36
                    </td>
                    <td >
                      4.0 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      5
                    </td>
                    <td >
                      3.2 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      21
                    </td>
                    <td >
                      126 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      37
                    </td>
                    <td >
                      5.0 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      6
                    </td>
                    <td >
                      4 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      22
                    </td>
                    <td >
                      158 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      38
                    </td>
                    <td >
                      6.3 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      7
                    </td>
                    <td >
                      5 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      23
                    </td>
                    <td >
                      200 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      39
                    </td>
                    <td >
                      8.0 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      8
                    </td>
                    <td >
                      6 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      24
                    </td>
                    <td >
                      250 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      40
                    </td>
                    <td >
                      10 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      9
                    </td>
                    <td >
                      8 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      25
                    </td>
                    <td >
                      316 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      41
                    </td>
                    <td >
                      13 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      10
                    </td>
                    <td >
                      10 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      26
                    </td>
                    <td >
                      398 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      42
                    </td>
                    <td >
                      16 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      11
                    </td>
                    <td >
                      13 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      27
                    </td>
                    <td >
                      500 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      43
                    </td>
                    <td >
                      20 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      12
                    </td>
                    <td >
                      16 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      28
                    </td>
                    <td >
                      630 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      44
                    </td>
                    <td >
                      25 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      13
                    </td>
                    <td >
                      20 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      29
                    </td>
                    <td >
                      800 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      45
                    </td>
                    <td >
                      32 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      14
                    </td>
                    <td >
                      25 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      30
                    </td>
                    <td >
                      1.0 W
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      46
                    </td>
                    <td >
                      40 W
                    </td>
                  </tr>
                  <tr>
                    <td >
                      15
                    </td>
                    <td >
                      32 mW
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      31
                    </td>
                    <td >
                      1.3 W
                    </td>
                    <td >
                      <p>  </p>
                    </td>
                    <td >
                      47
                    </td>
                    <td >
                      50 W
                    </td>
                  </tr>
                </tbody>
              </table>
</html>

Antenna Connectors and Cable
============================

See [[hardware]].

Calculating RF links
====================

A good place to learn about it is :

<http://www.radiolabs.com/stations/wifi_calc.html>

Also there is a great freeware developed here called Radio Mobile
Developped by Roger Coudé, VE2DBE
It works with land maps and calculate propagation in 3D
The defacto reference in ham and wireless networking

<http://www.cplus.org/rmw/rme.html>
