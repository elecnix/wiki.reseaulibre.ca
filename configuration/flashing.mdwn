[[!toc levels=3]]

# Flashing various types of firmware

This page is designed to give you quick howtos to flash common
devices. It is not meant to be a complete directory of all esoteric
devices, others have done this better.

## Linksys devices

1. connect the router with a wire to your computer
2. configure an IP on your computer

    ifconfig eth0:flash 192.168.1.2

3. reboot the router with the reset button pressed until the leds flash like a christmas tree
4. send the new firmware through tftp

    $ tftp 192.168.1.20
    tftp> binary
    tftp> put openwrt.bin

# Password reset

## OpenWRT firmwares

If you are lucky enough to have a [[OpenWRT]] device, you may be able
to reset the password using this simpler procedure:

1. Unplug the router's power cord.
2. Connect the router's LAN1 port directly to your PC.
3. Configure your PC with a static IP address between 192.168.1.2 and
192.168.1.254. E. g. 192.168.1.2 (gateway and DNS is not required).
    ifconfig eth0:flash 192.168.1.2
4. Plug the power on and wait for the DMZ LED to light up.
5. While the DMZ LED is on immediately press any button (Reset and Secure Easy Setup will work) a few times .

If done right the DMZ LED will quickly flash 3 times every second.

You should be able to telnet to the router at 192.168.1.1 now (no
username and password)

### Simple tips to recover the router in failsafe mode

NOTE: The root file system in failsafe mode is the SquashFS partition
mounted in readonly mode. To switch to the normal writable root file
system run mount_root and make any changes. Run `mount_root` now.

Forgot/lost your password and you like to set a new one

    passwd

Forgot the routers IP address

    uci get network.lan.ipaddr

You accidentally run 'ipkg upgrade' or filled up the flash by
installing to big packages (clean the JFFS2 partition and start over)

    mtd -r erase rootfs_data

If you are done with failsafe mode power cycle the router and boot in normal mode.

# Other guides

* [[ddwrt install instructions|http://www.dd-wrt.com/wiki/index.php/Installation]]
* [[ddwrt bad flash recovery instructions|http://www.dd-wrt.com/wiki/index.php/Recover_from_a_bad_flash]]
