[[!meta title="OLSRd configuration"]]

OLSR is a network protocol used to propagate route information in a decentralized and highly resilient manner.

[[!toc levels=3]]

# Base configuration

## OpenWRT config

 1. install the packages

        opkg update
        opkg install olsrd-luci luci-app-olsr

 2. enable the OLSR daemon and start it in `Services -> Initscripts`
 3. configure OLSR in `Services -> OLSR` (just enable it on the `lan`)

Those instructions were taken from [here](http://www.ubnt.com/wiki/OLSR_on_OpenWrt). This is [the package source](https://dev.openwrt.org/browser/packages/net/olsrd).

## Debian wired config

This configuration will enable olsrd on the wired interface of a machine:

    apt-get install olsrd
    vi /etc/olsrd/olsrd.conf # change eth1 to eth0
    olsrd -f /etc/olsrd/olsrd.conf -d 1 # to run in debugging mode for now
    vi /etc/default/olsrd # enable daemon when satisfied

# Route announcements

By default, OLSRd only announces the IP address of the interface it is configured on. To announce more routes, you need to add an HNA block. This can be done through the OpenWRT interface or as a code block. For example, if your node can route (say) 72.0.72.144/32 (your static IP), you will want a block like this:

    Hna4
    {
        # my public IP
        72.0.72.144 255.255.255.255
    }

You can of course announce whole netblocks in there and even a default route, if you want to give everyone access to the internets:

    Hna4
    {
        # my local network
        192.168.42.0 255.255.255.0
        # this machine is a gateway
        0.0.0.0 0.0.0.0
    }


IPv6 is also supported, of course.

# References

 * [Install instructions on OpenWRT](http://www.ubnt.com/wiki/OLSR_on_OpenWrt)
 * [OLSR IPv6 HOWTO](http://tldp.org/HOWTO/OLSR-IPv6-HOWTO)
 * [Optimized Link State Routing Protocol on wikipedia](https://en.wikipedia.org/wiki/Optimized_Link_State_Routing_Protocol)

[[!meta copyright="Copyright © 2011 Antoine Beaupré"]]

[[!meta license="""[[!toggle id="license" text="GFDL 1.2+"]][[!toggleable
id="license" text="Permission is granted to copy, distribute and/or modify this
document under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no Invariant
Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of the license
is included in the section entitled [[GNU Free Documentation
License|meta/gfdl]]."]]"""]]
